{"ast":null,"code":"import{useState}from'react';import{useForm}from'react-hook-form';import{yupResolver}from'@hookform/resolvers/yup';import{registerSchema}from'../utils/schema';import{registerUser}from'../services/login';import{showError,showSuccess}from'../utils/toast';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Register=()=>{var _errors$user,_errors$email,_errors$password;const[serverError,setServerError]=useState(\"\");const navigate=useNavigate();const{register,handleSubmit,formState:{errors}}=useForm({resolver:yupResolver(registerSchema)});const onSubmit=async data=>{try{const res=await registerUser(data);console.log(\"登録データ\",data);showSuccess(\"ユーザーの登録をしました\");setServerError(\"\");navigate('/login');}catch(error){var _error$response,_error$response$data;console.error(\"登録失敗:\",error.message);if((_error$response=error.response)!==null&&_error$response!==void 0&&(_error$response$data=_error$response.data)!==null&&_error$response$data!==void 0&&_error$response$data.message){setServerError(error.response.data.message);// サーバーからのエラーメッセージ\n}showError(\"ユーザーの登録に失敗しました\");}};return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center min-h-screen bg-gray-100\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-xs\",children:[/*#__PURE__*/_jsxs(\"form\",{className:\"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4\",onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-2\",htmlFor:\"username\",children:\"\\u30E6\\u30FC\\u30B6\\u30FC\\u540D\"}),/*#__PURE__*/_jsx(\"input\",{className:`shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline ${errors.user?'border-red-500':''}`,id:\"username\",type:\"text\",placeholder:\"\\u30E6\\u30FC\\u30B6\\u30FC\\u540D\",...register(\"user\")}),serverError&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-xs mt-2 italic\",children:serverError}),/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-xs italic\",children:(_errors$user=errors.user)===null||_errors$user===void 0?void 0:_errors$user.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-2\",htmlFor:\"email\",children:\"\\u30E1\\u30FC\\u30EB\\u30A2\\u30C9\\u30EC\\u30B9\"}),/*#__PURE__*/_jsx(\"input\",{className:`shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline ${errors.email?'border-red-500':''}`,id:\"email\",type:\"text\",placeholder:\"\\u30E1\\u30FC\\u30EB\\u30A2\\u30C9\\u30EC\\u30B9\",...register(\"email\")}),/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-xs italic\",children:(_errors$email=errors.email)===null||_errors$email===void 0?void 0:_errors$email.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-2\",htmlFor:\"password\",children:\"\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\"}),/*#__PURE__*/_jsx(\"input\",{className:`shadow appearance-none border  rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline ${errors.password?'border-red-500':''}`,id:\"password\",type:\"password\",placeholder:\"\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\",...register(\"password\")}),/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-xs italic\",children:(_errors$password=errors.password)===null||_errors$password===void 0?void 0:_errors$password.message})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-end\",children:/*#__PURE__*/_jsx(\"button\",{className:\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\",type:\"submit\",children:\"\\u65B0\\u898F\\u767B\\u9332\"})})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-gray-500 text-xs\",children:\"\\xA92020 Acme Corp. All rights reserved.\"})]})});};export default Register;","map":{"version":3,"names":["useState","useForm","yupResolver","registerSchema","registerUser","showError","showSuccess","useNavigate","jsx","_jsx","jsxs","_jsxs","Register","_errors$user","_errors$email","_errors$password","serverError","setServerError","navigate","register","handleSubmit","formState","errors","resolver","onSubmit","data","res","console","log","error","_error$response","_error$response$data","message","response","className","children","htmlFor","user","id","type","placeholder","email","password"],"sources":["C:/Users/hinan/todo-app/client/src/page/register.jsx"],"sourcesContent":["\r\nimport { useState } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { yupResolver } from '@hookform/resolvers/yup';\r\nimport { registerSchema } from '../utils/schema';\r\nimport { registerUser } from '../services/login';\r\nimport { showError , showSuccess } from '../utils/toast';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst  Register = () => {\r\n  \r\n  const [serverError, setServerError] = useState(\"\");\r\n  const navigate = useNavigate();\r\n  const {\r\n      register,\r\n      handleSubmit,\r\n      formState: { errors },\r\n  } = useForm({ resolver: yupResolver(registerSchema) });\r\n  \r\n  const onSubmit = async (data) => {\r\n   try {\r\n      const res = await registerUser(data);\r\n      console.log(\"登録データ\", data);\r\n      showSuccess(\"ユーザーの登録をしました\")\r\n      setServerError(\"\")\r\n      navigate('/login');\r\n    } catch (error) {\r\n      console.error(\"登録失敗:\", error.message);\r\n      if (error.response?.data?.message) {\r\n        setServerError(error.response.data.message); // サーバーからのエラーメッセージ\r\n      }\r\n      showError(\"ユーザーの登録に失敗しました\")\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex items-center justify-center min-h-screen bg-gray-100\">\r\n    <div className=\"w-full max-w-xs\">\r\n      <form className=\"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4\" onSubmit={handleSubmit(onSubmit)}>\r\n        <div className=\"mb-4\">\r\n          <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"username\">\r\n            ユーザー名\r\n          </label>\r\n          <input className={`shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline ${errors.user ? 'border-red-500' : ''}`} id=\"username\" type=\"text\" placeholder=\"ユーザー名\"\r\n            {...register(\"user\")}\r\n          />\r\n          {serverError && (<p className=\"text-red-500 text-xs mt-2 italic\">{serverError}</p>)}\r\n          <p className=\"text-red-500 text-xs italic\">{errors.user?.message}</p>\r\n        </div>\r\n            <div className=\"mb-4\">\r\n          <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"email\">\r\n            メールアドレス\r\n          </label>\r\n          <input className={`shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline ${errors.email ? 'border-red-500' : ''}`} id=\"email\" type=\"text\" placeholder=\"メールアドレス\"\r\n            {...register(\"email\")}\r\n          />\r\n          <p className=\"text-red-500 text-xs italic\">{errors.email?.message}</p>\r\n        </div>\r\n        <div className=\"mb-6\">\r\n          <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"password\">\r\n            パスワード\r\n          </label>\r\n          <input className={`shadow appearance-none border  rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline ${errors.password ? 'border-red-500' : ''}`} id=\"password\" type=\"password\" placeholder=\"パスワード\"\r\n            {...register(\"password\")}\r\n          />\r\n          <p className=\"text-red-500 text-xs italic\">{errors.password?.message}</p>\r\n        </div>\r\n        <div className=\"flex justify-end\">\r\n          <button className=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\" type=\"submit\">\r\n            新規登録\r\n          </button>\r\n        </div>\r\n      </form>\r\n      <p className=\"text-center text-gray-500 text-xs\">\r\n        &copy;2020 Acme Corp. All rights reserved.\r\n      </p>\r\n    </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Register;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}