{"ast":null,"code":"import{useEffect,useRef}from\"react\";import TaskInput from\"./component/TaskInput\";import Navbar from\"./component/Navbar\";import{TaskContext}from\"./context/TaskContext\";import CategoryInput from\"./component/CategoryInput\";import{useContext}from\"react\";import TaskListWrapper from\"./component/TaskListWrapper\";import'react-calendar/dist/Calendar.css';import{useTasks}from\"./hooks/useGetTasks\";import{useGetCategories}from\"./hooks/useGetCategories\";import{showError}from\"./utils/toast\";import{useAuth}from'./context/AuthContext';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";export default function TodoApp(){const didFetchRef=useRef(false);const{state}=useContext(TaskContext);const{categories}=useContext(TaskContext);const{loading}=useAuth();const{fetchTasks}=useTasks();const{fetchCategories}=useGetCategories();//初期データ取得\nuseEffect(()=>{if(didFetchRef.current)return;didFetchRef.current=true;const fetchInitialData=async()=>{try{await Promise.all([fetchTasks(),fetchCategories()]);}catch{showError(\"初期データの取得に失敗しました。\");}};fetchInitialData();},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 max-w-md mx-auto bg-white shadow rounded-lg mt-5\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-bold mb-4\",children:\"ToDo \\u30A2\\u30D7\\u30EA\"}),loading?/*#__PURE__*/_jsx(\"p\",{children:\"\\u8AAD\\u307F\\u8FBC\\u307F\\u4E2D...\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(TaskInput,{categories:categories}),/*#__PURE__*/_jsx(TaskListWrapper,{tasks:state.tasks,categories:categories}),/*#__PURE__*/_jsx(CategoryInput,{})]})]})]});}","map":{"version":3,"names":["useEffect","useRef","TaskInput","Navbar","TaskContext","CategoryInput","useContext","TaskListWrapper","useTasks","useGetCategories","showError","useAuth","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","TodoApp","didFetchRef","state","categories","loading","fetchTasks","fetchCategories","current","fetchInitialData","Promise","all","children","className","tasks"],"sources":["C:/Users/hinan/todo-app/client/src/TodoApp.js"],"sourcesContent":["\r\nimport { useEffect,useRef } from \"react\";\r\nimport TaskInput from \"./component/TaskInput\";\r\nimport Navbar from \"./component/Navbar\";\r\nimport { TaskContext } from \"./context/TaskContext\";\r\nimport CategoryInput from \"./component/CategoryInput\";\r\nimport { useContext } from \"react\"; \r\nimport TaskListWrapper from \"./component/TaskListWrapper\";\r\nimport 'react-calendar/dist/Calendar.css';\r\nimport { useTasks } from \"./hooks/useGetTasks\";\r\nimport { useGetCategories } from \"./hooks/useGetCategories\"; \r\nimport {showError} from \"./utils/toast\";\r\nimport { useAuth } from './context/AuthContext';\r\n\r\nexport default function TodoApp() {\r\n  const didFetchRef = useRef(false);\r\n  const { state } = useContext(TaskContext);\r\n  const {categories} =   useContext(TaskContext);\r\n  const { loading} = useAuth();\r\n  const { fetchTasks } = useTasks();\r\n  const { fetchCategories } = useGetCategories();\r\n\r\n//初期データ取得\r\nuseEffect(() => {\r\n\r\n  if (didFetchRef.current) return;\r\n  didFetchRef.current = true;\r\n\r\n  const fetchInitialData = async () => {\r\n    try {\r\n      await Promise.all([fetchTasks(), fetchCategories()]);\r\n    } catch {\r\n        showError(\"初期データの取得に失敗しました。\");\r\n    }\r\n  };\r\n  fetchInitialData();\r\n}, []);\r\n\r\n  \r\n  return (\r\n    <>\r\n    <Navbar />\r\n    <div className=\"p-4 max-w-md mx-auto bg-white shadow rounded-lg mt-5\">\r\n      <h1 className=\"text-xl font-bold mb-4\">ToDo アプリ</h1>\r\n\r\n      {loading ? (\r\n        <p>読み込み中...</p>\r\n      \r\n      ):(\r\n      <>\r\n        <TaskInput\r\n          categories={categories}\r\n        />\r\n\r\n        <TaskListWrapper\r\n          tasks={state.tasks}\r\n          categories={categories}\r\n        />\r\n\r\n        <CategoryInput/>\r\n      </>\r\n      )}\r\n  </div>\r\n</>\r\n  );\r\n}\r\n"],"mappings":"AACA,OAASA,SAAS,CAACC,MAAM,KAAQ,OAAO,CACxC,MAAO,CAAAC,SAAS,KAAM,uBAAuB,CAC7C,MAAO,CAAAC,MAAM,KAAM,oBAAoB,CACvC,OAASC,WAAW,KAAQ,uBAAuB,CACnD,MAAO,CAAAC,aAAa,KAAM,2BAA2B,CACrD,OAASC,UAAU,KAAQ,OAAO,CAClC,MAAO,CAAAC,eAAe,KAAM,6BAA6B,CACzD,MAAO,kCAAkC,CACzC,OAASC,QAAQ,KAAQ,qBAAqB,CAC9C,OAASC,gBAAgB,KAAQ,0BAA0B,CAC3D,OAAQC,SAAS,KAAO,eAAe,CACvC,OAASC,OAAO,KAAQ,uBAAuB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,QAAA,IAAAC,SAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEhD,cAAe,SAAS,CAAAC,OAAOA,CAAA,CAAG,CAChC,KAAM,CAAAC,WAAW,CAAGlB,MAAM,CAAC,KAAK,CAAC,CACjC,KAAM,CAAEmB,KAAM,CAAC,CAAGd,UAAU,CAACF,WAAW,CAAC,CACzC,KAAM,CAACiB,UAAU,CAAC,CAAKf,UAAU,CAACF,WAAW,CAAC,CAC9C,KAAM,CAAEkB,OAAO,CAAC,CAAGX,OAAO,CAAC,CAAC,CAC5B,KAAM,CAAEY,UAAW,CAAC,CAAGf,QAAQ,CAAC,CAAC,CACjC,KAAM,CAAEgB,eAAgB,CAAC,CAAGf,gBAAgB,CAAC,CAAC,CAEhD;AACAT,SAAS,CAAC,IAAM,CAEd,GAAImB,WAAW,CAACM,OAAO,CAAE,OACzBN,WAAW,CAACM,OAAO,CAAG,IAAI,CAE1B,KAAM,CAAAC,gBAAgB,CAAG,KAAAA,CAAA,GAAY,CACnC,GAAI,CACF,KAAM,CAAAC,OAAO,CAACC,GAAG,CAAC,CAACL,UAAU,CAAC,CAAC,CAAEC,eAAe,CAAC,CAAC,CAAC,CAAC,CACtD,CAAE,KAAM,CACJd,SAAS,CAAC,kBAAkB,CAAC,CACjC,CACF,CAAC,CACDgB,gBAAgB,CAAC,CAAC,CACpB,CAAC,CAAE,EAAE,CAAC,CAGJ,mBACET,KAAA,CAAAF,SAAA,EAAAc,QAAA,eACAhB,IAAA,CAACV,MAAM,GAAE,CAAC,cACVc,KAAA,QAAKa,SAAS,CAAC,sDAAsD,CAAAD,QAAA,eACnEhB,IAAA,OAAIiB,SAAS,CAAC,wBAAwB,CAAAD,QAAA,CAAC,yBAAQ,CAAI,CAAC,CAEnDP,OAAO,cACNT,IAAA,MAAAgB,QAAA,CAAG,mCAAQ,CAAG,CAAC,cAGjBZ,KAAA,CAAAF,SAAA,EAAAc,QAAA,eACEhB,IAAA,CAACX,SAAS,EACRmB,UAAU,CAAEA,UAAW,CACxB,CAAC,cAEFR,IAAA,CAACN,eAAe,EACdwB,KAAK,CAAEX,KAAK,CAACW,KAAM,CACnBV,UAAU,CAAEA,UAAW,CACxB,CAAC,cAEFR,IAAA,CAACR,aAAa,GAAC,CAAC,EAChB,CACD,EACA,CAAC,EACN,CAAC,CAEH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}