{"ast":null,"code":"import{useMemo}from\"react\";import{updateTaskAPI}from\"../services/TaskService\";import{useContext}from\"react\";import{TaskContext}from\"../context/TaskContext\";import{deleteTaskAPI}from\"../services/TaskService\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function TaskList(_ref){let{tasks=[],categories=[],startEditing,editText,setEditText,// saveEdit,\n// toggleTask,\ntoggleComplete,// updatePriority,\nremoveCategory,// updateDueDate,\ncategoryFilter}=_ref;console.log(\"受け取ったLIST内 tasks:\",tasks);console.log(\"受け取ったLIST内 categories:\",categories);const{dispatch}=useContext(TaskContext);const toggleTask=async id=>{dispatch({type:\"TOGGLE_TASK\",payload:{id}});};const updatePriority=async(id,newPriority)=>{dispatch({type:\"UPDATE_PRIORITY\",payload:{id,newPriority}});await updateTaskAPI(id,{priority:newPriority});};const updateDueDate=async(id,dueDate)=>{dispatch({type:\"UPDATE_DUE_DATE\",payload:{id,dueDate}});await updateTaskAPI(id,{dueDate:dueDate});};const handleUpdateTask=async(taskId,updatedFields)=>{try{const updatedTask=await updateTaskAPI(taskId,{text:updatedFields});dispatch({type:\"UPDATE_TASK\",payload:updatedTask});}catch(err){console.error(\"タスクの更新に失敗しました:\",err);}};const deleteTask=async id=>{await deleteTaskAPI(id);dispatch({type:\"DELETE_TASK\",payload:{id}});};const filteredTasks=useMemo(()=>{return tasks.filter(task=>categoryFilter.length===0||categoryFilter.includes(task.category));},[tasks,categoryFilter]);return/*#__PURE__*/_jsx(\"div\",{children:categories.map(cat=>{const tasksInCategory=filteredTasks.filter(task=>task.category===cat);if(tasksInCategory.length===0)return null;return/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"font-bold text-lg mt-4\",children:cat.title}),cat.title!==\"未分類\"&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeCategory(cat._id,cat.title),className:\"text-red-500 text-sm\",children:\"\\u524A\\u9664\"})]}),/*#__PURE__*/_jsx(\"ul\",{children:tasksInCategory.map(task=>/*#__PURE__*/_jsxs(\"li\",{className:`flex justify-between items-center p-2 border-b\n                    ${task.priority===\"高\"?\"bg-red-200\":\"\"}\n                    ${task.priority===\"中\"?\"bg-yellow-200\":\"\"}\n                    ${task.priority===\"低\"?\"bg-green-200\":\"\"}\n                  `,onDoubleClick:()=>startEditing(task.id,task.text),children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:task.completed,onChange:()=>toggleComplete(task.id),className:\"mr-2\"}),task.isEditing?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editText,onChange:e=>setEditText(e.target.value),onBlur:()=>handleUpdateTask(task.id,editText),onKeyDown:e=>e.key===\"Enter\"&&handleUpdateTask(task.id,editText),autoFocus:true,className:\"flex-grow\"})}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:`flex-grow cursor-pointer ${task.completed?\"line-through text-gray-400\":\"\"}`,onClick:()=>toggleTask(task.id),children:task.text}),/*#__PURE__*/_jsxs(\"select\",{value:task.priority,onChange:e=>updatePriority(task.id,e.target.value),className:\"border p-1 rounded text-sm mr-2\",children:[/*#__PURE__*/_jsx(\"option\",{value:1,children:\"\\u9AD8\"}),/*#__PURE__*/_jsx(\"option\",{value:2,children:\"\\u4E2D\"}),/*#__PURE__*/_jsx(\"option\",{value:3,children:\"\\u4F4E\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:task.dueDate||\"\",onChange:e=>updateDueDate(task.id,e.target.value)}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteTask(task.id),className:\"text-red-500 text-sm\",children:\"\\u524A\\u9664\"})]})]},task.id))})]},cat._id);})});}","map":{"version":3,"names":["useMemo","updateTaskAPI","useContext","TaskContext","deleteTaskAPI","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","TaskList","_ref","tasks","categories","startEditing","editText","setEditText","toggleComplete","removeCategory","categoryFilter","console","log","dispatch","toggleTask","id","type","payload","updatePriority","newPriority","priority","updateDueDate","dueDate","handleUpdateTask","taskId","updatedFields","updatedTask","text","err","error","deleteTask","filteredTasks","filter","task","length","includes","category","children","map","cat","tasksInCategory","className","title","onClick","_id","onDoubleClick","checked","completed","onChange","isEditing","value","e","target","onBlur","onKeyDown","key","autoFocus"],"sources":["C:/Users/hinan/todo-app/client/src/component/TaskList.jsx"],"sourcesContent":["import { useMemo } from \"react\";\r\n\r\nimport { updateTaskAPI } from \"../services/TaskService\";\r\nimport { useContext } from \"react\";\r\nimport { TaskContext } from \"../context/TaskContext\";\r\nimport { deleteTaskAPI } from \"../services/TaskService\"; \r\n\r\nexport default function TaskList({\r\n  tasks = [],\r\n  categories = [],\r\n  startEditing,\r\n  editText,\r\n  setEditText,\r\n  // saveEdit,\r\n  // toggleTask,\r\n  toggleComplete,\r\n  // updatePriority,\r\n  removeCategory,\r\n  // updateDueDate,\r\n  categoryFilter\r\n}) {\r\n\r\n  console.log(\"受け取ったLIST内 tasks:\", tasks);\r\n  console.log(\"受け取ったLIST内 categories:\", categories);\r\n  const {  dispatch } = useContext(TaskContext);\r\n\r\n  const toggleTask=async(id)=>{\r\n     dispatch({ type: \"TOGGLE_TASK\", payload: { id } })\r\n  \r\n    }\r\n\r\n  const  updatePriority =async (id, newPriority) =>{\r\n    dispatch({ type: \"UPDATE_PRIORITY\", payload: { id, newPriority } })\r\n    await updateTaskAPI(id, { priority: newPriority });\r\n  }\r\n  \r\n  const  updateDueDate=async(id, dueDate) =>{\r\n    dispatch({ type: \"UPDATE_DUE_DATE\", payload: { id, dueDate } })\r\n    await updateTaskAPI(id, { dueDate: dueDate });\r\n  }\r\n                 \r\n\r\n  const handleUpdateTask = async (taskId, updatedFields) => {\r\n  try {\r\n    const updatedTask = await updateTaskAPI(taskId, { text: updatedFields });\r\n    dispatch({type: \"UPDATE_TASK\",payload: updatedTask,});\r\n  } catch (err) {\r\n    console.error(\"タスクの更新に失敗しました:\", err);\r\n  }\r\n};\r\n\r\n  const deleteTask = async (id) => {\r\n    await deleteTaskAPI(id);\r\n    dispatch({ type: \"DELETE_TASK\", payload: { id } });\r\n  };\r\n\r\n  const filteredTasks = useMemo(() => {\r\n    return tasks.filter((task) =>\r\n      categoryFilter.length === 0 || categoryFilter.includes(task.category)\r\n    );\r\n  }, [tasks, categoryFilter]);\r\n\r\n  \r\n  return (\r\n    <div>\r\n      {categories.map((cat) => {\r\n        const tasksInCategory = filteredTasks.filter((task) => task.category === cat);\r\n        if (tasksInCategory.length === 0) return null;\r\n\r\n        return (\r\n          <div key={cat._id} className=\"mb-4\">\r\n            <div className=\"flex justify-between items-center\">\r\n              <h2 className=\"font-bold text-lg mt-4\">{cat.title}</h2>\r\n              {cat.title !== \"未分類\" && (\r\n                <button\r\n                  onClick={() => removeCategory(cat._id, cat.title)}\r\n                  className=\"text-red-500 text-sm\"\r\n                >削除</button>\r\n              )}\r\n            </div>\r\n\r\n            <ul>\r\n              {tasksInCategory.map((task) => (\r\n                <li\r\n                  key={task.id}\r\n                  className={`flex justify-between items-center p-2 border-b\r\n                    ${task.priority === \"高\" ? \"bg-red-200\" : \"\"}\r\n                    ${task.priority === \"中\" ? \"bg-yellow-200\" : \"\"}\r\n                    ${task.priority === \"低\" ? \"bg-green-200\" : \"\"}\r\n                  `}\r\n                  onDoubleClick={() => startEditing(task.id, task.text)}\r\n                >\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={task.completed}\r\n                    onChange={() => toggleComplete(task.id)}\r\n                    className=\"mr-2\"\r\n                  />\r\n                  {task.isEditing ? (\r\n                    <><input\r\n                      type=\"text\"\r\n                      value={editText}\r\n                      onChange={(e) => setEditText(e.target.value)}\r\n                      onBlur={() => handleUpdateTask(task.id,editText)}\r\n                      onKeyDown={(e) => e.key === \"Enter\" && handleUpdateTask(task.id,editText)}\r\n                      autoFocus\r\n                      className=\"flex-grow\" /></>\r\n                  ) : (\r\n                    <>\r\n                      <span\r\n                        className={`flex-grow cursor-pointer ${\r\n                          task.completed ? \"line-through text-gray-400\" : \"\"\r\n                        }`}\r\n                        onClick={() => toggleTask(task.id)}\r\n                      >\r\n                        {task.text}\r\n                      </span>\r\n                      <select\r\n                        value={task.priority}\r\n                        onChange={(e) =>updatePriority(task.id, e.target.value)}\r\n                        className=\"border p-1 rounded text-sm mr-2\"\r\n                      >\r\n                        <option value={1}>高</option>\r\n                        <option value={2}>中</option>\r\n                        <option value={3}>低</option>\r\n                      </select>\r\n                      <input\r\n                        type=\"date\"\r\n                        value={task.dueDate || \"\"}\r\n                        onChange={(e) => updateDueDate(task.id, e.target.value)} />\r\n                      <button\r\n                        onClick={() => deleteTask(task.id)}\r\n                        className=\"text-red-500 text-sm\"\r\n                      >\r\n                        削除\r\n                      </button>\r\n                    </>\r\n                  )}\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}