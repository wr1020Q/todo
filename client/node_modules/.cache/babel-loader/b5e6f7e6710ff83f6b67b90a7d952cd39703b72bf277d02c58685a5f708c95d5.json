{"ast":null,"code":"import{TaskContext}from\"./context/TaskContext\";import TaskList from\"./TaskList\";import{useMemo,useState,useContext}from\"react\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function TaskListWrapper(_ref){let{categories,editText,dueDate,removeCategory}=_ref;const{state,dispatch}=useContext(TaskContext);const{tasks,categoryFilter,sortBy}=state;const[searchQuery,setSearchQuery]=useState(\"\");const filteredTasks=useMemo(()=>{const result=tasks.filter(task=>{var _task$text;const text=((_task$text=task.text)!==null&&_task$text!==void 0?_task$text:\"\").toLowerCase();const keyword=searchQuery.toLowerCase();const matchesCategory=categoryFilter.length===0||categoryFilter.includes(task.category);const matchesKeyword=searchQuery.trim()===\"\"||text.includes(keyword);// console.log({\n//   text,\n//   keyword,\n//   matchesCategory,\n//   matchesKeyword,\n//   included: matchesCategory && matchesKeyword,\n// });\nreturn matchesCategory&&matchesKeyword;});return result;},[tasks,categoryFilter,searchQuery]);console.log(\"filteredTasks W:\",filteredTasks);const sortedTasks=useMemo(()=>{return[...filteredTasks].sort((a,b)=>{switch(sortBy){case\"deadlineAsc\":return new Date(a.dueDate)-new Date(b.dueDate);case\"deadlineDesc\":return new Date(b.dueDate)-new Date(a.dueDate);case\"priority\":return b.priority-a.priority;case\"createdAtDesc\":return new Date(b.id)-new Date(a.id);default:return 0;}});},[filteredTasks,sortBy]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u30AD\\u30FC\\u30EF\\u30FC\\u30C9\\u3067\\u691C\\u7D22\",value:searchQuery,onChange:e=>setSearchQuery(e.target.value),className:\"border p-2 rounded mb-2\"}),/*#__PURE__*/_jsxs(\"select\",{value:sortBy,onChange:e=>dispatch({type:\"SET_SORT\",payload:e.target.value}),children:[/*#__PURE__*/_jsx(\"option\",{value:\"deadlineAsc\",children:\"\\u7DE0\\u5207\\u304C\\u8FD1\\u3044\\u9806\"}),/*#__PURE__*/_jsx(\"option\",{value:\"deadlineDesc\",children:\"\\u7DE0\\u5207\\u304C\\u9060\\u3044\\u9806\"}),/*#__PURE__*/_jsx(\"option\",{value:\"priority\",children:\"\\u512A\\u5148\\u5EA6\\u304C\\u9AD8\\u3044\\u9806\"}),/*#__PURE__*/_jsx(\"option\",{value:\"createdAtDesc\",children:\"\\u4F5C\\u6210\\u65E5\\u304C\\u65B0\\u3057\\u3044\\u9806\"})]}),/*#__PURE__*/_jsx(TaskList,{tasks:sortedTasks,categories:categories,editText:editText,setEditText:text=>dispatch({type:\"START_EDITING\",payload:{id:null,text}}),startEditing:(id,text)=>dispatch({type:\"START_EDITING\",payload:{id,text}}),saveEdit:id=>dispatch({type:\"SAVE_EDIT\",payload:{id}}),toggleTask:id=>dispatch({type:\"TOGGLE_TASK\",payload:{id}}),toggleComplete:id=>dispatch({type:\"TOGGLE_COMPLETE\",payload:{id}}),deleteTask:id=>dispatch({type:\"DELETE_TASK\",payload:{id}}),updatePriority:(id,newPriority)=>dispatch({type:\"UPDATE_PRIORITY\",payload:{id,newPriority}}),removeCategory:removeCategory,dueDate:dueDate,updateDueDate:(id,dueDate)=>dispatch({type:\"UPDATE_DUE_DATE\",payload:{id,dueDate}}),categoryFilter:categoryFilter})]});}","map":{"version":3,"names":["TaskContext","TaskList","useMemo","useState","useContext","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","TaskListWrapper","_ref","categories","editText","dueDate","removeCategory","state","dispatch","tasks","categoryFilter","sortBy","searchQuery","setSearchQuery","filteredTasks","result","filter","task","_task$text","text","toLowerCase","keyword","matchesCategory","length","includes","category","matchesKeyword","trim","console","log","sortedTasks","sort","a","b","Date","priority","id","children","type","placeholder","value","onChange","e","target","className","payload","setEditText","startEditing","saveEdit","toggleTask","toggleComplete","deleteTask","updatePriority","newPriority","updateDueDate"],"sources":["C:/Users/hinan/todo-app/src/client/src/TaskListWrapper.jsx"],"sourcesContent":["import { TaskContext } from \"./context/TaskContext\"; \r\nimport TaskList from \"./TaskList\";\r\nimport { useMemo, useState ,useContext } from \"react\";\r\n\r\nexport default function TaskListWrapper({ categories,editText,dueDate,removeCategory }) {\r\n  const { state, dispatch } = useContext(TaskContext);\r\n  const { tasks, categoryFilter, sortBy } = state;\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n\r\n  const filteredTasks = useMemo(() => {\r\n    const result = tasks.filter((task) => {\r\n      const text = (task.text ?? \"\").toLowerCase();\r\n      const keyword = searchQuery.toLowerCase();\r\n      const matchesCategory = categoryFilter.length === 0 || categoryFilter.includes(task.category);\r\n      const matchesKeyword = searchQuery.trim() === \"\" || text.includes(keyword);\r\n  \r\n      // console.log({\r\n      //   text,\r\n      //   keyword,\r\n      //   matchesCategory,\r\n      //   matchesKeyword,\r\n      //   included: matchesCategory && matchesKeyword,\r\n      // });\r\n  \r\n      return matchesCategory && matchesKeyword;\r\n    });\r\n  \r\n    return result;\r\n  }, [tasks, categoryFilter, searchQuery]);\r\n\r\n  console.log(\"filteredTasks W:\", filteredTasks);\r\n\r\n  const sortedTasks = useMemo(() => {\r\n    return [...filteredTasks].sort((a, b) => {\r\n      switch (sortBy) {\r\n        case \"deadlineAsc\":\r\n          return new Date(a.dueDate) - new Date(b.dueDate);\r\n        case \"deadlineDesc\":\r\n          return new Date(b.dueDate) - new Date(a.dueDate);\r\n        case \"priority\":\r\n          return b.priority - a.priority;\r\n        case \"createdAtDesc\":\r\n          return new Date(b.id) - new Date(a.id);\r\n        default:\r\n          return 0;\r\n      }\r\n    });\r\n  }, [filteredTasks, sortBy]);\r\n\r\n  return (\r\n    <>\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"キーワードで検索\"\r\n        value={searchQuery}\r\n        onChange={(e) => setSearchQuery(e.target.value)}\r\n        className=\"border p-2 rounded mb-2\"\r\n      />\r\n      <select\r\n        value={sortBy}\r\n        onChange={(e) =>dispatch({ type: \"SET_SORT\", payload: e.target.value })}\r\n      >\r\n        <option value=\"deadlineAsc\">締切が近い順</option>\r\n        <option value=\"deadlineDesc\">締切が遠い順</option>\r\n        <option value=\"priority\">優先度が高い順</option>\r\n        <option value=\"createdAtDesc\">作成日が新しい順</option>\r\n      </select>\r\n\r\n      <TaskList\r\n        tasks={sortedTasks}\r\n        categories={categories}\r\n        editText={editText}\r\n        setEditText={(text) => dispatch({ type: \"START_EDITING\", payload: { id: null, text } })}\r\n        startEditing={(id, text) => dispatch({ type: \"START_EDITING\", payload: { id, text } })}\r\n        saveEdit={(id) => dispatch({ type: \"SAVE_EDIT\", payload: { id } })}\r\n        toggleTask={(id) => dispatch({ type: \"TOGGLE_TASK\", payload: { id } })}\r\n        toggleComplete={(id) => dispatch({ type: \"TOGGLE_COMPLETE\", payload: { id } })}\r\n        deleteTask={(id) => dispatch({ type: \"DELETE_TASK\", payload: { id } })}\r\n        updatePriority={(id, newPriority) =>\r\n          dispatch({ type: \"UPDATE_PRIORITY\", payload: { id, newPriority } })\r\n        }\r\n        removeCategory={removeCategory}\r\n        dueDate={dueDate}\r\n        updateDueDate={(id, dueDate) =>\r\n          dispatch({ type: \"UPDATE_DUE_DATE\", payload: { id, dueDate } })}\r\n          categoryFilter={categoryFilter}\r\n      />\r\n    </>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}