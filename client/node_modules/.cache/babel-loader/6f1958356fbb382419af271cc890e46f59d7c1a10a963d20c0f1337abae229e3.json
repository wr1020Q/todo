{"ast":null,"code":"import{React,useEffect,useState}from\"react\";import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faTrash}from'@fortawesome/free-solid-svg-icons';import{useAuth}from'../context/AuthContext';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";export default function TaskItem(_ref){let{task,editingTaskId,startEditing,toggleTask,updatePriority,updateDueDate,handleUpdateTask,deleteTask,errorMessage}=_ref;const isEditing=editingTaskId===task._id;const[localEditText,setLocalEditText]=useState(\"\");const{user}=useAuth();useEffect(()=>{if(isEditing){setLocalEditText(task.text);// 編集開始時だけセット\n}},[isEditing,task.text]);return/*#__PURE__*/_jsxs(\"li\",{className:`flex justify-between items-center p-2 border-b\n        ${task.priority===1?\"bg-red-200\":\"\"}\n        ${task.priority===2?\"bg-yellow-200\":\"\"}\n        ${task.priority===3?\"bg-green-200\":\"\"}\n      `,onDoubleClick:()=>startEditing(task._id,task.text),children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:task.completed,onChange:()=>toggleTask(task._id,!task.completed),className:\"mr-2\"}),isEditing?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:localEditText,onChange:e=>setLocalEditText(e.target.value),onBlur:()=>handleUpdateTask(task._id,localEditText),onKeyDown:e=>{if(e.key===\"Enter\"&&task.user===user.id){e.preventDefault();handleUpdateTask(task._id,localEditText);}},autoFocus:true,className:\"flex-grow\"}),errorMessage&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-xs italic ml-2\",children:errorMessage})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:`flex-grow cursor-pointer ${task.completed?\"line-through text-gray-400\":\"\"}`,onClick:()=>toggleTask(task._id,task.completed),onDoubleClick:()=>startEditing(task._id,task.text),children:task.text}),/*#__PURE__*/_jsxs(\"select\",{value:task.priority,onChange:e=>updatePriority(task._id,e.target.value),className:\"border p-1 rounded text-sm mr-2\",children:[/*#__PURE__*/_jsx(\"option\",{value:1,children:\"\\u9AD8\"}),/*#__PURE__*/_jsx(\"option\",{value:2,children:\"\\u4E2D\"}),/*#__PURE__*/_jsx(\"option\",{value:3,children:\"\\u4F4E\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:task.dueDate?task.dueDate.split(\"T\")[0]:\"\",onChange:e=>updateDueDate(task._id,e.target.value),className:\"mr-2\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>deleteTask(task._id),className:\"text-red-500 text-sm\",children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faTrash})})]})]},task._id);}","map":{"version":3,"names":["React","useEffect","useState","FontAwesomeIcon","faTrash","useAuth","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","TaskItem","_ref","task","editingTaskId","startEditing","toggleTask","updatePriority","updateDueDate","handleUpdateTask","deleteTask","errorMessage","isEditing","_id","localEditText","setLocalEditText","user","text","className","priority","onDoubleClick","children","type","checked","completed","onChange","value","e","target","onBlur","onKeyDown","key","id","preventDefault","autoFocus","onClick","dueDate","split","icon"],"sources":["C:/Users/hinan/todo-app/client/src/component/TaskItem.jsx"],"sourcesContent":["\r\n\r\nimport {React ,useEffect,useState}from \"react\";\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faTrash } from '@fortawesome/free-solid-svg-icons';\r\nimport { useAuth } from '../context/AuthContext';\r\n\r\nexport default function TaskItem({\r\n  task,\r\n  editingTaskId,\r\n  startEditing,\r\n  toggleTask,\r\n  updatePriority,\r\n  updateDueDate,\r\n  handleUpdateTask,\r\n  deleteTask,\r\n  errorMessage,\r\n}) {\r\n  const isEditing = editingTaskId === task._id;\r\n  const [localEditText, setLocalEditText] = useState(\"\");\r\n  const { user  } = useAuth();\r\n\r\n  useEffect(() => {\r\n    if (isEditing) {\r\n      setLocalEditText(task.text); // 編集開始時だけセット\r\n    }\r\n  }, [isEditing, task.text]);\r\n\r\n  return (\r\n    <li\r\n      key={task._id}\r\n      className={`flex justify-between items-center p-2 border-b\r\n        ${task.priority === 1 ? \"bg-red-200\" : \"\"}\r\n        ${task.priority === 2 ? \"bg-yellow-200\" : \"\"}\r\n        ${task.priority === 3 ? \"bg-green-200\" : \"\"}\r\n      `}\r\n      onDoubleClick={() => startEditing(task._id, task.text)}\r\n    >\r\n      <input\r\n        type=\"checkbox\"\r\n        checked={task.completed}\r\n        onChange={() => toggleTask(task._id, !task.completed)}\r\n        className=\"mr-2\"\r\n      />\r\n      {isEditing ? (\r\n      <>\r\n        <input\r\n          type=\"text\"\r\n          value={localEditText}\r\n          onChange={(e) => setLocalEditText(e.target.value)}\r\n          onBlur={() => handleUpdateTask(task._id, localEditText)}\r\n          onKeyDown={(e) => {\r\n            if (e.key === \"Enter\" && task.user === user.id) {\r\n              e.preventDefault(); \r\n              handleUpdateTask(task._id, localEditText);\r\n            }     \r\n          }}\r\n          autoFocus\r\n          className=\"flex-grow\"\r\n        />\r\n        {errorMessage && <p className=\"text-red-500 text-xs italic ml-2\">{errorMessage}</p>}\r\n      </>\r\n      ) : (\r\n        <>\r\n          <span\r\n            className={`flex-grow cursor-pointer ${task.completed ? \"line-through text-gray-400\" : \"\"}`}\r\n            onClick={() => toggleTask(task._id, task.completed)}\r\n            onDoubleClick={() => startEditing(task._id, task.text)}\r\n          >\r\n            {task.text}\r\n          </span>\r\n          <select\r\n            value={task.priority}\r\n            onChange={(e) => updatePriority(task._id, e.target.value)}\r\n            className=\"border p-1 rounded text-sm mr-2\"\r\n          >\r\n            <option value={1}>高</option>\r\n            <option value={2}>中</option>\r\n            <option value={3}>低</option>\r\n          </select>\r\n          <input\r\n            type=\"date\"\r\n            value={task.dueDate ? task.dueDate.split(\"T\")[0] : \"\"}\r\n            onChange={(e) => updateDueDate(task._id, e.target.value)}\r\n            className=\"mr-2\"\r\n          />\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => deleteTask(task._id)}\r\n            className=\"text-red-500 text-sm\"\r\n          >\r\n            <FontAwesomeIcon icon={faTrash} />\r\n          </button>\r\n        </>\r\n      )}\r\n    </li>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}