{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hinan\\\\todo-app\\\\client\\\\src\\\\component\\\\TaskListWrapper.jsx\",\n  _s = $RefreshSig$();\nimport { TaskContext } from \"../context/TaskContext\";\nimport TaskList from \"./TaskList\";\nimport { useMemo, useState, useContext } from \"react\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function TaskListWrapper({\n  categories\n}) {\n  _s();\n  const {\n    state,\n    dispatch\n  } = useContext(TaskContext);\n  const {\n    tasks,\n    categoryFilter,\n    sortBy\n  } = state;\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const filteredTasks = useMemo(() => {\n    const result = Array.isArray(tasks) ? tasks.filter(task => {\n      var _task$text;\n      const text = ((_task$text = task.text) !== null && _task$text !== void 0 ? _task$text : \"\").toLowerCase();\n      const keyword = searchQuery.toLowerCase();\n      const matchesCategory = Array.isArray(categoryFilter) ? categoryFilter.length === 0 || categoryFilter.some(f => {\n        var _task$category$_id, _task$category;\n        const taskCatId = (_task$category$_id = (_task$category = task.category) === null || _task$category === void 0 ? void 0 : _task$category._id) !== null && _task$category$_id !== void 0 ? _task$category$_id : task.category;\n        return String(f) === String(taskCatId);\n      }) : true;\n      const matchesKeyword = searchQuery.trim() === \"\" || text.includes(keyword);\n      return matchesCategory && matchesKeyword;\n    }) : [];\n    return result;\n  }, [state.tasks, categoryFilter, searchQuery]);\n  console.log(\"受け取ったWLIST内 tasks:\", tasks);\n  console.log(\"受け取ったWLIST内 categories:\", categories);\n  console.log(\"受け取ったWLIST内 categoryFilter:\", categoryFilter);\n  console.log(\"filteredTasks W:\", filteredTasks);\n  const sortedTasks = useMemo(() => {\n    return [...filteredTasks].sort((a, b) => {\n      switch (sortBy) {\n        case \"deadlineAsc\":\n          return new Date(a.dueDate) - new Date(b.dueDate);\n        case \"deadlineDesc\":\n          return new Date(b.dueDate) - new Date(a.dueDate);\n        case \"priority\":\n          return b.priority - a.priority;\n        case \"createdAtDesc\":\n          return new Date(b.id) - new Date(a.id);\n        default:\n          return 0;\n      }\n    });\n  }, [filteredTasks, sortBy]);\n  console.log(\"sortedTasks W:\", sortedTasks);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      placeholder: \"\\u30BF\\u30B9\\u30AF\\u540D\\u3067\\u691C\\u7D22\",\n      value: searchQuery,\n      onChange: e => setSearchQuery(e.target.value),\n      className: \"border p-2 rounded mb-2\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n      value: sortBy,\n      onChange: e => dispatch({\n        type: \"SET_SORT\",\n        payload: e.target.value\n      }),\n      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"deadlineAsc\",\n        children: \"\\u7DE0\\u5207\\u304C\\u8FD1\\u3044\\u9806\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"deadlineDesc\",\n        children: \"\\u7DE0\\u5207\\u304C\\u9060\\u3044\\u9806\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"priority\",\n        children: \"\\u512A\\u5148\\u5EA6\\u304C\\u9AD8\\u3044\\u9806\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"createdAtDesc\",\n        children: \"\\u4F5C\\u6210\\u65E5\\u304C\\u65B0\\u3057\\u3044\\u9806\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TaskList, {\n      tasks: sortedTasks,\n      categories: categories,\n      setEditText: text => dispatch({\n        type: \"START_EDITING\",\n        payload: {\n          id: null,\n          text\n        }\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(TaskListWrapper, \"zIxLo19sPJgad2AVhdyXlgMW3cg=\");\n_c = TaskListWrapper;\nvar _c;\n$RefreshReg$(_c, \"TaskListWrapper\");","map":{"version":3,"names":["TaskContext","TaskList","useMemo","useState","useContext","jsxDEV","_jsxDEV","Fragment","_Fragment","TaskListWrapper","categories","_s","state","dispatch","tasks","categoryFilter","sortBy","searchQuery","setSearchQuery","filteredTasks","result","Array","isArray","filter","task","_task$text","text","toLowerCase","keyword","matchesCategory","length","some","f","_task$category$_id","_task$category","taskCatId","category","_id","String","matchesKeyword","trim","includes","console","log","sortedTasks","sort","a","b","Date","dueDate","priority","id","children","type","placeholder","value","onChange","e","target","className","fileName","_jsxFileName","lineNumber","columnNumber","payload","setEditText","_c","$RefreshReg$"],"sources":["C:/Users/hinan/todo-app/client/src/component/TaskListWrapper.jsx"],"sourcesContent":["import { TaskContext } from \"../context/TaskContext\"; \r\nimport TaskList from \"./TaskList\";\r\nimport { useMemo, useState ,useContext } from \"react\";\r\n\r\nexport default function TaskListWrapper({categories}) {\r\n  const { state, dispatch } = useContext(TaskContext);\r\n  const { tasks, categoryFilter, sortBy } = state;\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n\r\n  const filteredTasks = useMemo(() => {\r\n    const result = Array.isArray(tasks)\r\n      ?tasks.filter((task) => {\r\n      const text = (task.text ?? \"\").toLowerCase();\r\n      const keyword = searchQuery.toLowerCase();\r\n      const matchesCategory = Array.isArray(categoryFilter) ? categoryFilter.length === 0 || \r\n        categoryFilter.some((f) => {\r\n        const taskCatId = task.category?._id ?? task.category;\r\n        return String(f) === String(taskCatId);\r\n      })\r\n      : true;\r\n      const matchesKeyword = searchQuery.trim() === \"\" || text.includes(keyword);\r\n      return matchesCategory && matchesKeyword;\r\n    }):[];\r\n\r\n    return result;\r\n  }, [state.tasks, categoryFilter, searchQuery]);\r\n\r\n\r\n  console.log(\"受け取ったWLIST内 tasks:\", tasks);\r\n  console.log(\"受け取ったWLIST内 categories:\", categories);\r\n  console.log(\"受け取ったWLIST内 categoryFilter:\", categoryFilter);\r\n  console.log(\"filteredTasks W:\", filteredTasks);\r\n\r\n  const sortedTasks = useMemo(() => {\r\n    return [...filteredTasks].sort((a, b) => {\r\n      switch (sortBy) {\r\n        case \"deadlineAsc\":\r\n          return new Date(a.dueDate) - new Date(b.dueDate);\r\n        case \"deadlineDesc\":\r\n          return new Date(b.dueDate) - new Date(a.dueDate);\r\n        case \"priority\":\r\n          return b.priority - a.priority;\r\n        case \"createdAtDesc\":\r\n          return new Date(b.id) - new Date(a.id);\r\n        default:\r\n          return 0;\r\n      }\r\n    });\r\n  }, [filteredTasks, sortBy]);\r\n  \r\n    console.log(\"sortedTasks W:\", sortedTasks);\r\n  return (\r\n    <>\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"タスク名で検索\"\r\n        value={searchQuery}\r\n        onChange={(e) => setSearchQuery(e.target.value)}\r\n        className=\"border p-2 rounded mb-2\"\r\n      />\r\n      <select\r\n        value={sortBy}\r\n        onChange={(e) =>dispatch({ type: \"SET_SORT\", payload: e.target.value })}\r\n      >\r\n        <option value=\"deadlineAsc\">締切が近い順</option>\r\n        <option value=\"deadlineDesc\">締切が遠い順</option>\r\n        <option value=\"priority\">優先度が高い順</option>\r\n        <option value=\"createdAtDesc\">作成日が新しい順</option>\r\n      </select>\r\n\r\n      <TaskList\r\n        tasks={sortedTasks}\r\n        categories = {categories}\r\n        setEditText={(text) => dispatch({ type: \"START_EDITING\", payload: { id: null, text } })}\r\n      />\r\n    </>\r\n  );  \r\n}"],"mappings":";;AAAA,SAASA,WAAW,QAAQ,wBAAwB;AACpD,OAAOC,QAAQ,MAAM,YAAY;AACjC,SAASC,OAAO,EAAEC,QAAQ,EAAEC,UAAU,QAAQ,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAEtD,eAAe,SAASC,eAAeA,CAAC;EAACC;AAAU,CAAC,EAAE;EAAAC,EAAA;EACpD,MAAM;IAAEC,KAAK;IAAEC;EAAS,CAAC,GAAGT,UAAU,CAACJ,WAAW,CAAC;EACnD,MAAM;IAAEc,KAAK;IAAEC,cAAc;IAAEC;EAAO,CAAC,GAAGJ,KAAK;EAC/C,MAAM,CAACK,WAAW,EAAEC,cAAc,CAAC,GAAGf,QAAQ,CAAC,EAAE,CAAC;EAElD,MAAMgB,aAAa,GAAGjB,OAAO,CAAC,MAAM;IAClC,MAAMkB,MAAM,GAAGC,KAAK,CAACC,OAAO,CAACR,KAAK,CAAC,GAChCA,KAAK,CAACS,MAAM,CAAEC,IAAI,IAAK;MAAA,IAAAC,UAAA;MACxB,MAAMC,IAAI,GAAG,EAAAD,UAAA,GAACD,IAAI,CAACE,IAAI,cAAAD,UAAA,cAAAA,UAAA,GAAI,EAAE,EAAEE,WAAW,CAAC,CAAC;MAC5C,MAAMC,OAAO,GAAGX,WAAW,CAACU,WAAW,CAAC,CAAC;MACzC,MAAME,eAAe,GAAGR,KAAK,CAACC,OAAO,CAACP,cAAc,CAAC,GAAGA,cAAc,CAACe,MAAM,KAAK,CAAC,IACjFf,cAAc,CAACgB,IAAI,CAAEC,CAAC,IAAK;QAAA,IAAAC,kBAAA,EAAAC,cAAA;QAC3B,MAAMC,SAAS,IAAAF,kBAAA,IAAAC,cAAA,GAAGV,IAAI,CAACY,QAAQ,cAAAF,cAAA,uBAAbA,cAAA,CAAeG,GAAG,cAAAJ,kBAAA,cAAAA,kBAAA,GAAIT,IAAI,CAACY,QAAQ;QACrD,OAAOE,MAAM,CAACN,CAAC,CAAC,KAAKM,MAAM,CAACH,SAAS,CAAC;MACxC,CAAC,CAAC,GACA,IAAI;MACN,MAAMI,cAAc,GAAGtB,WAAW,CAACuB,IAAI,CAAC,CAAC,KAAK,EAAE,IAAId,IAAI,CAACe,QAAQ,CAACb,OAAO,CAAC;MAC1E,OAAOC,eAAe,IAAIU,cAAc;IAC1C,CAAC,CAAC,GAAC,EAAE;IAEL,OAAOnB,MAAM;EACf,CAAC,EAAE,CAACR,KAAK,CAACE,KAAK,EAAEC,cAAc,EAAEE,WAAW,CAAC,CAAC;EAG9CyB,OAAO,CAACC,GAAG,CAAC,oBAAoB,EAAE7B,KAAK,CAAC;EACxC4B,OAAO,CAACC,GAAG,CAAC,yBAAyB,EAAEjC,UAAU,CAAC;EAClDgC,OAAO,CAACC,GAAG,CAAC,6BAA6B,EAAE5B,cAAc,CAAC;EAC1D2B,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAAExB,aAAa,CAAC;EAE9C,MAAMyB,WAAW,GAAG1C,OAAO,CAAC,MAAM;IAChC,OAAO,CAAC,GAAGiB,aAAa,CAAC,CAAC0B,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK;MACvC,QAAQ/B,MAAM;QACZ,KAAK,aAAa;UAChB,OAAO,IAAIgC,IAAI,CAACF,CAAC,CAACG,OAAO,CAAC,GAAG,IAAID,IAAI,CAACD,CAAC,CAACE,OAAO,CAAC;QAClD,KAAK,cAAc;UACjB,OAAO,IAAID,IAAI,CAACD,CAAC,CAACE,OAAO,CAAC,GAAG,IAAID,IAAI,CAACF,CAAC,CAACG,OAAO,CAAC;QAClD,KAAK,UAAU;UACb,OAAOF,CAAC,CAACG,QAAQ,GAAGJ,CAAC,CAACI,QAAQ;QAChC,KAAK,eAAe;UAClB,OAAO,IAAIF,IAAI,CAACD,CAAC,CAACI,EAAE,CAAC,GAAG,IAAIH,IAAI,CAACF,CAAC,CAACK,EAAE,CAAC;QACxC;UACE,OAAO,CAAC;MACZ;IACF,CAAC,CAAC;EACJ,CAAC,EAAE,CAAChC,aAAa,EAAEH,MAAM,CAAC,CAAC;EAEzB0B,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEC,WAAW,CAAC;EAC5C,oBACEtC,OAAA,CAAAE,SAAA;IAAA4C,QAAA,gBACE9C,OAAA;MACE+C,IAAI,EAAC,MAAM;MACXC,WAAW,EAAC,4CAAS;MACrBC,KAAK,EAAEtC,WAAY;MACnBuC,QAAQ,EAAGC,CAAC,IAAKvC,cAAc,CAACuC,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE;MAChDI,SAAS,EAAC;IAAyB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACpC,CAAC,eACFzD,OAAA;MACEiD,KAAK,EAAEvC,MAAO;MACdwC,QAAQ,EAAGC,CAAC,IAAI5C,QAAQ,CAAC;QAAEwC,IAAI,EAAE,UAAU;QAAEW,OAAO,EAAEP,CAAC,CAACC,MAAM,CAACH;MAAM,CAAC,CAAE;MAAAH,QAAA,gBAExE9C,OAAA;QAAQiD,KAAK,EAAC,aAAa;QAAAH,QAAA,EAAC;MAAM;QAAAQ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eAC3CzD,OAAA;QAAQiD,KAAK,EAAC,cAAc;QAAAH,QAAA,EAAC;MAAM;QAAAQ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eAC5CzD,OAAA;QAAQiD,KAAK,EAAC,UAAU;QAAAH,QAAA,EAAC;MAAO;QAAAQ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eACzCzD,OAAA;QAAQiD,KAAK,EAAC,eAAe;QAAAH,QAAA,EAAC;MAAQ;QAAAQ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACzC,CAAC,eAETzD,OAAA,CAACL,QAAQ;MACPa,KAAK,EAAE8B,WAAY;MACnBlC,UAAU,EAAIA,UAAW;MACzBuD,WAAW,EAAGvC,IAAI,IAAKb,QAAQ,CAAC;QAAEwC,IAAI,EAAE,eAAe;QAAEW,OAAO,EAAE;UAAEb,EAAE,EAAE,IAAI;UAAEzB;QAAK;MAAE,CAAC;IAAE;MAAAkC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACzF,CAAC;EAAA,eACF,CAAC;AAEP;AAACpD,EAAA,CAzEuBF,eAAe;AAAAyD,EAAA,GAAfzD,eAAe;AAAA,IAAAyD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}